{% extends "base_with_menu.html" %}

{% block title %}{{ viewed_user.get_username.capitalize }} Catalog - {{ block.super }}{% endblock %}

{% block content %}

    <h2>{{ viewed_user.get_username.capitalize }} Catalog</h2>

    <section class="nes-container with-title">
        <h3 class="title">Stats</h3>
        <div>
            <p>
                <a href="{% url 'user_games' viewed_user.get_username %}"><strong>{{ user_games_count }}</strong> games</a>
            </p>
            <p>
                <a href="{% url 'user_platforms' viewed_user.get_username %}"><strong>{{ user_platforms_count }}</strong> platforms played in</a>
            </p>
            <p>
                <a href="{% url 'user_currently_playing_games' viewed_user.get_username %}"><strong>{{ currently_playing_games_count }}</strong> currently playing games</a>
            </p>
            <p>
                <a href="{% url 'user_finished_games' viewed_user.get_username %}"><strong>{{ finished_games_count }}</strong> finished games</a>
                <br/>
                <progress class="nes-progress {{ progress_class }}" value="{{ finished_games_progress }}"
                    max="100"
                    title="Finished {{ finished_games_progress }}% of the catalog ({{ finished_games_count }}/{{ user_games_count }})"></progress>
            </p>
            <p>
                <a href="{% url 'user_wishlisted_games' viewed_user.get_username %}"><strong>{{ wishlisted_games_count }}</strong> wishlisted games</a>
            </p>
        </div>
    </section>

    <section class="nes-container with-title">
        <h3 class="title">Latest videogames added</h3>
        <div>
            <ul class="nes-list is-disc margin-top">
                {% for item in latest_user_games %}
                <li>
                    <a href="{% url 'game_details' item.game.id %}">{{ item.game.name }}</a> ({{ item.platform.shortname }}){% if item.year_finished %} <i class="nes-icon trophy" title="Finished"></i>{% endif %}{% if item.currently_playing %} <i class="nes-pixel-art snes-jp-logo" title="Currently playing"></i>{% endif %}{% if item.no_longer_owned %} <i class="nes-pixel-art snes-jp-logo is-disabled" title="No longer owned"></i>{% endif %}
                </li>
                {% endfor %}
            </ul>

            <p>
                <a class="nes-btn is-primary" href="{% url 'user_games' viewed_user.get_username %}">All user games</a>
            </p>
        </div>
    </section>

    <section class="container with-title">
        <h3 class="title">Latest platforms added</h3>
        <div>
            <ul class="nes-list is-disc margin-top">
                {% for platform in latest_user_platforms %}
                    <li>
                        <a href="{% url "user_games_by_platform" viewed_user.get_username platform.id %}">{{ platform.name }}</a>
                    </li>
                {% endfor %}
            </ul>

            <p>
                <a class="nes-btn is-primary" href="{% url 'user_platforms' viewed_user.get_username %}">All platforms played in</a>
            </p>
        </div>
    </section>

{% endblock %}